<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaFo - –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        @keyframes terminal-glow {
            0%, 100% {
                text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00, 0 0 15px #00ff00;
                border-color: #00ff00;
            }
            50% {
                text-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00, 0 0 30px #00ff00;
                border-color: #00ff41;
            }
        }

        @keyframes data-stream {
            0% { transform: translateY(10px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes hack-pulse {
            0%, 100% { color: #00ff00; }
            25% { color: #00ff41; }
            50% { color: #41ff00; }
            75% { color: #00ff80; }
        }

        .blink-cursor {
            animation: blink 1s infinite;
        }

        .terminal-glow {
            animation: terminal-glow 2s ease-in-out infinite;
        }

        .hack-text {
            animation: hack-pulse 3s ease-in-out infinite;
        }

        .data-row {
            animation: data-stream 0.3s ease-out;
        }

        .terminal-border {
            border: 1px solid #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3), inset 0 0 10px rgba(0, 255, 0, 0.1);
        }

        .matrix-bg {
            background:
                linear-gradient(90deg, transparent 98%, rgba(0, 255, 0, 0.05) 100%),
                linear-gradient(rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0.95));
        }

        .status-online {
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        .status-critical {
            color: #ff0000;
            text-shadow: 0 0 5px #ff0000;
        }

        .scrollbar-terminal::-webkit-scrollbar {
            width: 6px;
        }

        .scrollbar-terminal::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.5);
        }

        .scrollbar-terminal::-webkit-scrollbar-thumb {
            background: #00ff00;
            border-radius: 3px;
        }
    </style>
</head>
<body class="bg-black text-green-400 font-mono matrix-bg min-h-screen">

    <!-- –•–∞–∫–µ—Ä—Å–∫–∏–π —Ö–µ–¥–µ—Ä -->
    <div class="terminal-border bg-black p-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <span class="text-2xl hack-text">‚ñà‚ñà‚ñà‚ñà TAFO –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ‚ñà‚ñà‚ñà‚ñà</span>
                <span class="blink-cursor">‚ñà</span>
            </div>
            <div class="flex items-center space-x-6 text-sm">
                <span>–°–¢–ê–¢–£–°: <span class="status-online">–û–ù–õ–ê–ô–ù</span></span>
                <span>–ü–û–î–ö–õ: <span class="status-online">–ó–ê–©–ò–©–ï–ù–û</span></span>
                <span>–í–†–ï–ú–Ø: <span id="currentTime"></span></span>
                <a href="{{ url_for('logout') }}" class="hover:text-green-200 transition-colors">[–í–´–•–û–î]</a>
            </div>
        </div>
    </div>

    <!-- –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div class="terminal-border bg-black bg-opacity-80 mx-4 mt-4 p-4">
        <div class="text-xs space-y-1">
            <div>root@tafo-—Å–µ—Ä–≤–µ—Ä:~# <span class="hack-text">—Å—Ç–∞—Ç—É—Å_—Å–∏—Å—Ç–µ–º—ã</span></div>
            <div>‚îî‚îÄ‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞...</div>
            <div>‚îî‚îÄ‚îÄ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</div>
            <div>‚îî‚îÄ‚îÄ <span class="status-online">–£–°–ü–ï–®–ù–û</span> - –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ UID –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω</div>
            <div>‚îî‚îÄ‚îÄ <span class="status-online">–£–°–ü–ï–®–ù–û</span> - –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∫—Ä–æ–≤–∏—â –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞</div>
            <div class="mt-2">root@tafo-—Å–µ—Ä–≤–µ—Ä:~# <span class="blink-cursor">‚ñà</span></div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mx-4 mt-6">
        <div class="terminal-border bg-black bg-opacity-80 p-4">
            <div class="text-lg font-bold hack-text">–í–°–ï–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô</div>
            <div class="text-3xl font-mono" id="totalUsers">{{ total_users }}</div>
            <div class="text-xs text-green-600">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤</div>
        </div>
        <div class="terminal-border bg-black bg-opacity-80 p-4">
            <div class="text-lg font-bold hack-text">–°–û–ö–†–û–í–ò–©–ê</div>
            <div class="text-3xl font-mono" id="totalTreasures">{{ total_treasures }}</div>
            <div class="text-xs text-green-600">–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞—è–≤–æ–∫</div>
        </div>
        <div class="terminal-border bg-black bg-opacity-80 p-4">
            <div class="text-lg font-bold hack-text">–ù–ê–ì–†–£–ó–ö–ê –°–ò–°–¢–ï–ú–´</div>
            <div class="text-3xl font-mono status-online">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</div>
            <div class="text-xs text-green-600">100% —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏</div>
        </div>
        <div class="terminal-border bg-black bg-opacity-80 p-4">
            <div class="text-lg font-bold hack-text">–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨</div>
            <div class="text-3xl font-mono status-online">–ó–ê–©–ò–©–ï–ù–û</div>
            <div class="text-xs text-green-600">–í—Å–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞—â–∏—â–µ–Ω—ã</div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mx-4 mt-6">

        <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        <div class="lg:col-span-2">
            <div class="terminal-border bg-black bg-opacity-80">
                <div class="p-4 border-b border-green-400">
                    <h2 class="text-xl font-bold hack-text">
                        ‚îå‚îÄ –î–û–°–¢–£–ü –ö –ë–ê–ó–ï –î–ê–ù–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ‚îÄ‚îê
                    </h2>
                </div>
                <div class="p-4">
                    <div class="overflow-x-auto scrollbar-terminal max-h-96">
                        <table class="w-full text-xs">
                            <thead>
                                <tr class="border-b border-green-400">
                                    <th class="text-left p-2 hack-text">UID</th>
                                    <th class="text-left p-2 hack-text">EMAIL</th>
                                    <th class="text-left p-2 hack-text">–ü–ê–†–û–õ–¨</th>
                                    <th class="text-left p-2 hack-text">IP</th>
                                    <th class="text-left p-2 hack-text">–õ–û–ö–ê–¶–ò–Ø</th>
                                    <th class="text-left p-2 hack-text">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</th>
                                </tr>
                            </thead>
                            <tbody id="usersTable">
                                {% for user in users %}
                                <tr class="border-b border-green-900 hover:bg-green-900 hover:bg-opacity-10 data-row">
                                    <td class="p-2 font-bold text-yellow-400">{{ user.uid }}</td>
                                    <td class="p-2">{{ user.email }}</td>
                                    <td class="p-2 text-red-400">{{ user.password }}</td>
                                    <td class="p-2 text-blue-400">{{ user.ip }}</td>
                                    <td class="p-2 text-purple-400">{{ user.city }}</td>
                                    <td class="p-2 text-green-600">{{ user.registration_date }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ–∫—Ä–æ–≤–∏—â -->
            <div class="terminal-border bg-black bg-opacity-80 mt-6">
                <div class="p-4 border-b border-green-400">
                    <h2 class="text-xl font-bold hack-text">
                        ‚îå‚îÄ –õ–û–ì –ê–ö–¢–ò–í–ù–û–°–¢–ò –°–û–ö–†–û–í–ò–© ‚îÄ‚îê
                    </h2>
                </div>
                <div class="p-4">
                    <div class="overflow-x-auto scrollbar-terminal max-h-64">
                        <table class="w-full text-xs">
                            <thead>
                                <tr class="border-b border-green-400">
                                    <th class="text-left p-2 hack-text">UID</th>
                                    <th class="text-left p-2 hack-text">–¢–ò–ü –°–û–ö–†–û–í–ò–©–ê</th>
                                    <th class="text-left p-2 hack-text">–í–†–ï–ú–Ø</th>
                                    <th class="text-left p-2 hack-text">IP</th>
                                </tr>
                            </thead>
                            <tbody id="treasuresTable">
                                {% for treasure in treasures %}
                                <tr class="border-b border-green-900 hover:bg-green-900 hover:bg-opacity-10 data-row">
                                    <td class="p-2 font-bold text-yellow-400">{{ treasure.uid }}</td>
                                    <td class="p-2 text-orange-400">{{ treasure.reward }}</td>
                                    <td class="p-2 text-green-600">{{ treasure.date }}</td>
                                    <td class="p-2 text-blue-400">{{ treasure.ip if treasure.ip else 'Unknown' }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="space-y-6">

            <!-- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã -->
            <div class="terminal-border bg-black bg-opacity-80">
                <div class="p-4 border-b border-green-400">
                    <h2 class="text-xl font-bold hack-text">‚îå‚îÄ –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´ ‚îÄ‚îê</h2>
                </div>
                <div class="p-4 space-y-2 text-xs">
                    <div class="flex justify-between">
                        <span>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:</span>
                        <span class="status-online">–û–ù–õ–ê–ô–ù</span>
                    </div>
                    <div class="flex justify-between">
                        <span>API –°–µ—Ä–≤–µ—Ä:</span>
                        <span class="status-online">–†–ê–ë–û–¢–ê–ï–¢</span>
                    </div>
                    <div class="flex justify-between">
                        <span>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</span>
                        <span class="status-online">–ó–ê–©–ò–©–ï–ù–û</span>
                    </div>
                    <div class="flex justify-between">
                        <span>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:</span>
                        <span class="status-online">–ê–ö–¢–ò–í–ù–û</span>
                    </div>
                    <div class="flex justify-between">
                        <span>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</span>
                        <span id="lastUpdate">{{ "–°–µ–π—á–∞—Å" }}</span>
                    </div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="terminal-border bg-black bg-opacity-80">
                <div class="p-4 border-b border-green-400">
                    <h2 class="text-xl font-bold hack-text">‚îå‚îÄ –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø ‚îÄ‚îê</h2>
                </div>
                <div class="p-4 space-y-3">
                    <button onclick="refreshData()" class="w-full bg-green-700 hover:bg-green-600 text-black font-bold py-2 px-4 text-xs terminal-border transition-all">
                        üîÑ –û–ë–ù–û–í–ò–¢–¨ –î–ê–ù–ù–´–ï
                    </button>
                    <button onclick="exportData()" class="w-full bg-blue-700 hover:bg-blue-600 text-black font-bold py-2 px-4 text-xs terminal-border transition-all">
                        üìä –≠–ö–°–ü–û–†–¢ –ë–ê–ó–´ –î–ê–ù–ù–´–•
                    </button>
                    <button onclick="clearCache()" class="w-full bg-yellow-700 hover:bg-yellow-600 text-black font-bold py-2 px-4 text-xs terminal-border transition-all">
                        üóëÔ∏è –û–ß–ò–°–¢–ò–¢–¨ –ö–≠–®
                    </button>
                </div>